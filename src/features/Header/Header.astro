---
import HeaderLink from "@/features/Header/HeaderLink.astro";
import Link from "@/components/Link/Link.astro";

import { headerLinkOf } from "./headerLinkMapper";
import { Image } from "astro:assets";
import { ARTICLES_PATH } from "@/features/Blog/List/constants/path";
import { SITE_TITLE } from "@/constants/meta";

interface Props {
  context: string;
}

const { context } = Astro.props;

const headerLinks = headerLinkOf(context);
---

<header class="shadow-lg mx-auto py-3 lg:pt-3 lg:px-0 fixed top-0 left-0 w-full z-50 bg-[rgba(36,36,36,0.9)] backdrop-blur-xl border-b border-white/10">
  <div class="flex justify-between items-center">
    <Link href={ARTICLES_PATH} class="site-title-link">
      <div class="flex items-center">
        <Image
          src={"/masayan-illust.png"}
          width={32}
          height={20}
          alt={"西垣雅矢のプロフィール画像"}
          format="avif"
          class="mr-2 hidden md:block rounded-full"
        />
        <h2 class="headerTitle">
          {SITE_TITLE}
        </h2>
      </div>
    </Link>

    <nav class="flex items-center space-x-3">
      {
        headerLinks.map((link) => (
          <HeaderLink href={link.href} iconName={link.iconName}>
            {link.text}
          </HeaderLink>
        ))
      }
    </nav>
  </div>
  <style>
    header {
      margin: 0 0 1em 0;
      /* fixed header用の余白はbody側で調整推奨 */
    }

    header > div {
      @apply mx-auto;
      width: 90%;
      max-width: 1400px;
    }

    .headerTitle {
      @apply font-bold text-base sm:text-xl md:text-2xl transition-all duration-200;
    }
    
    :global(.site-title-link) {
      @apply transition-all duration-200 ease-out;
    }
    
    :global(.site-title-link:hover) {
      @apply transform scale-105;
    }
    
    :global(.site-title-link:hover .headerTitle) {
      color: rgba(127, 167, 255, 0.9);
    }
    
    /* 超小画面対応 (439px以下) */
    @media (max-width: 439px) {
      header > div {
        width: 95%;
        padding: 0 0.5rem;
      }
      
      .headerTitle {
        @apply text-sm;
        font-size: 0.875rem;
      }
      
      nav {
        gap: 0.5rem;
      }
    }
    
    /* 極小画面対応 (360px以下) */
    @media (max-width: 360px) {
      header > div {
        width: 98%;
        padding: 0 0.25rem;
      }
      
      .headerTitle {
        font-size: 0.8rem;
      }
      
      nav {
        gap: 0.25rem;
      }
    }
  </style>
</header>
