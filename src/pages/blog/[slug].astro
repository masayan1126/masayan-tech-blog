---
import { getBlogDetail, getBlogs } from "src/libs/microcms";
import BlogPostLayout from "../../layouts/BlogPostLayout.astro";
export async function getStaticPaths() {
  const res = await getBlogs();
  const posts = res.contents;
  return posts.map((post) => {
    return {
      params: { slug: post.id },
      props: post,
    };
  });
}
const { slug } = Astro.params;
const post = await getBlogDetail(slug as string);
const {
  title,
  content,
  createdAt,
  publishedAt,
  updatedAt,
  description,
  eyecatch,
} = post;
---

<BlogPostLayout
  title={title}
  description={description}
  pubDate={new Date(publishedAt)}
  heroImage={eyecatch.url}
>
  <p set:html={content} />
</BlogPostLayout>
